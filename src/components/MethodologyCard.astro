---
import { formatMarkdown } from '../utils/formatMarkdown';

interface Props {
  number: number;
  title: string;
  paragraphs: string[];
  testimonial?: {
    quote: string;
    author: string;
    role?: string;
  };
}

const { number, title, paragraphs, testimonial } = Astro.props;
---

<div class="card bg-white">
  <div class="flex items-start gap-4 mb-4">
    <span class="bg-teal-600 text-white font-bold text-xl w-10 h-10 rounded-full flex items-center justify-center shrink-0">
      {number}
    </span>
    <h3 class="heading-card">{title}</h3>
  </div>

  {paragraphs.map((paragraph, index) => (
    <p class={`text-lg text-teal-900 ${index < paragraphs.length - 1 || testimonial ? 'mb-6' : ''}`} set:html={formatMarkdown(paragraph)} />
  ))}

  {testimonial && (
    <blockquote class="border-l-4 border-purple bg-purple/5 rounded-r-lg pl-6 pr-4 py-4 italic text-teal-900">
      "{testimonial.quote}"
      <footer class="mt-2 not-italic">
        <span class="text-teal-950 font-medium">â€” {testimonial.author}</span>
        {testimonial.role && <span class="text-teal-900 text-sm block mt-1">{testimonial.role}</span>}
      </footer>
    </blockquote>
  )}
</div>
