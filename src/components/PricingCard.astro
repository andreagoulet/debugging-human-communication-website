---
import { formatMarkdown } from '../utils/formatMarkdown';

interface Props {
  title: string;
  price: number;
  period?: string;
  description: string;
  features?: string[];
  bestFor?: string;
  highlight?: string;
  featured?: boolean;
  guarantee?: string;
  ctaText?: string;
  ctaUrl?: string;
}

const { title, price, period, description, features, bestFor, highlight, featured, guarantee, ctaText, ctaUrl } = Astro.props;
---

{featured ? (
  <div class="card-featured bg-gradient-to-br from-teal-600 to-teal-800 mb-12">
    <div class="bg-white/95 rounded-xl p-6 md:p-8">
      <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-6">
        <div>
          <h3 class="heading-card mb-2">{title}</h3>
          <p class="text-4xl font-extrabold text-teal-950 mb-1">${price}</p>
          {period && <p class="text-sm text-teal-700 mb-4">{period}</p>}
          <p class="text-teal-900 text-lg mb-4" set:html={formatMarkdown(description)} />
          {features && features.length > 0 && (
            <ul class="space-y-2 mb-4">
              {features.map((feature) => (
                <li class="flex items-start gap-2 text-teal-900">
                  <span class="text-teal-600 mt-1 shrink-0">&#10003;</span>
                  <span set:html={formatMarkdown(feature)} />
                </li>
              ))}
            </ul>
          )}
          {guarantee && (
            <div class="bg-gray-50 border border-gray-200 rounded-lg px-4 py-3 flex items-start gap-3">
              <!-- Shield with dollar sign -->
              <svg class="w-7 h-7 text-teal-950 shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                <text x="12" y="16" text-anchor="middle" font-size="12" font-weight="bold" fill="currentColor" stroke="none">$</text>
              </svg>
              <p class="text-teal-950" set:html={formatMarkdown(guarantee)} />
            </div>
          )}
        </div>
        {ctaText && ctaUrl && (
          <div class="shrink-0">
            <a href={ctaUrl} class="btn-primary whitespace-nowrap">
              {ctaText}
            </a>
          </div>
        )}
      </div>
    </div>
  </div>
) : (
  <div class="card-compact border-2 border-teal-200 hover:border-teal-400 transition-colors">
    <h4 class="text-xl font-bold text-teal-950 mb-2">{title}</h4>
    <p class="text-3xl font-extrabold text-teal-950 mb-1">
      ${price}
      {period && <span class="text-lg font-normal text-teal-900">{period}</span>}
    </p>
    <p class="text-teal-900 mb-4" set:html={formatMarkdown(description)} />
    {features && features.length > 0 && (
      <ul class="space-y-2 mb-4">
        {features.map((feature) => (
          <li class="flex items-start gap-2 text-teal-900">
            <span class="text-teal-600 mt-1 shrink-0">&#10003;</span>
            <span set:html={formatMarkdown(feature)} />
          </li>
        ))}
      </ul>
    )}
    {highlight && (
      <p class="text-teal-800 text-sm leading-relaxed mb-4" set:html={formatMarkdown(highlight)} />
    )}
    {bestFor && (
      <p class="text-sm text-teal-700 border-t border-teal-100 pt-3 mt-auto" set:html={formatMarkdown('**Best for:** ' + bestFor)} />
    )}
  </div>
)}
